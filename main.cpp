//============================================================================
// Name        : MailSystem.cpp
// Author      : MeteorKL
// Version     :
// Copyright   : Your copyright notice
// Description : MailSystem in C++, Ansi-style
//============================================================================
// Xcode for Qt project.
// Generated by create_qt_xcode_project.sh, Laohyx.

#include "CSmtp.h"
#include "CPop3.h"
#include <iostream>
#include <QApplication>
#include <QLabel>
#include "mainwindow.h"
#include "mainwindow_2.h"
#include "mainwindow_3.h"

using namespace std;

int main(int argc, char *argv[])
{
//    测试pop3收邮件
//    size_t ulMailNum;
//    bool bIsDebug = true;
//    CPop3 pop3Test("qqq1051814353@163.com", "qqq1051814353", bIsDebug);
//    if ( pop3Test.bfLoginPop3() )
//        mailRev = pop3Test.pmailfReceiveMail(mailRevN);
    
//    测试smtp发邮件
//    bool bIsDebug = true;
//    CSmtp smtpTest("qqq1051814353@163.com", "qqq1051814353");
//    if ( smtpTest.bfLoginSmtp(bIsDebug) ) {
//        if ( smtpTest.bfSendMail("MeteorKL", "1051814353@qq.com", "这不是垃圾邮件", "这不是垃圾邮件", bIsDebug) )
    
//    qt图形界面
    QApplication a(argc, argv); // 创建一个qt应用
    bool bIsDebug = true; // 是否输出调试信息
    MainWindow wLoginWindow(bIsDebug); // 创建登录界面
    wLoginWindow.show(); // 显示登录界面
    MainWindow_2 wMainWindow(bIsDebug); // 创建主界面
    MainWindow_3 wSendMailWindow(bIsDebug); // 创建发送邮件界面
    QObject::connect(&wLoginWindow, SIGNAL(sigLoginSuccessful(std::string, std::string)),
                     &wMainWindow, SLOT(slotInit(std::string, std::string))); // 登录成功则初始化主界面
    QObject::connect(&wLoginWindow, SIGNAL(sigLoginSuccessful(std::string, std::string)),
                     &wLoginWindow, SLOT(slotClose())); // 登录成功则关闭登录界面
    QObject::connect(&wMainWindow, SIGNAL(sigWriteMail(std::string, std::string)),
                     &wSendMailWindow, SLOT(slotInit(std::string, std::string))); // 点击写邮件按钮创建发送邮件界面
    return a.exec();
}

